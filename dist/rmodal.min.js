!function(t,o){"use strict";function s(t,o){return Object.prototype.toString.call(t).toLowerCase()==="[object "+o+"]"}function i(t,o){var s=t.className.split(/\s+/);s[0]||(s=[]),s.indexOf(o)>-1||(s.push(o),t.className=s.join(" "))}function e(t,o){var s=t.className.split(/\s+/),i=s.indexOf(o);i>-1&&s.splice(i,1),t.className=s.join(" ")}function n(t,o){this.opened=!1,this.options=o||{},this.options.bodyClass=this.options.bodyClass||"modal-open",this.options.dialogClass=this.options.dialogClass||"modal-dialog",this.options.dialogOpenClass=this.options.dialogOpenClass||"bounceInDown",this.options.dialogCloseClass=this.options.dialogCloseClass||"bounceOutUp",void 0===this.options.escapeClose&&(this.options.escapeClose=!0),this.options.focusElements=this.options.elements||["a[href]","area[href]","input:not([disabled]):not([type=hidden])","button:not([disabled])","select:not([disabled])","textarea:not([disabled])","iframe","object","embed","*[tabindex]","*[contenteditable]"],void 0===this.options.focus&&(this.options.focus=!0),this.focusOutElement=null,this.overlay=t,this.dialog=t.querySelector("."+this.options.dialogClass),void 0!==this.options.content&&this.content(this.options.content)}n.prototype.open=function(t){var o=this;return this.content(t),s(this.options.beforeOpen,"function")?this.options.beforeOpen(function(){o._doOpen()}):void this._doOpen()},n.prototype._doOpen=function(){i(o.body,this.options.bodyClass),e(this.dialog,this.options.dialogCloseClass),i(this.dialog,this.options.dialogOpenClass),this.overlay.style.display="block",this.resize(),this.options.focus&&(this.focusOutElement=o.activeElement,this.focus()),s(this.options.afterOpen,"function")&&this.options.afterOpen(),this.opened=!0},n.prototype.close=function(){var t=this;return s(this.options.beforeClose,"function")?this.options.beforeClose(function(){t._doClose()}):void this._doClose()},n.prototype._doClose=function(){var t=this;e(this.dialog,this.options.dialogOpenClass),i(this.dialog,this.options.dialogCloseClass),e(o.body,this.options.bodyClass),this.options.focus&&this.focus(this.focusOutElement),s(this.options.afterClose,"function")&&this.options.afterClose(),this.opened=!1,setTimeout(function(){t.overlay.style.display="none"},500)},n.prototype.content=function(t){return void 0===t?this.dialog.innerHTML:void(this.dialog.innerHTML=t)},n.prototype.resize=function(){var s=t.innerWidth,i=t.innerHeight;o.body.clientHeight>t.innerHeight&&(s=o.body.clientWidth,i=o.body.clientHeight),this.overlay.style.width=s+"px",this.overlay.style.height=i+"px"},n.prototype.elements=function(o,s){return s=s||t.navigator.appVersion.indexOf("MSIE 9.0")>-1,[].filter.call(this._elementsAll(o),function(o){if(s){var i=t.getComputedStyle(o);return"none"!==i.display&&"hidden"!==i.visibility}return null!==o.offsetParent})},n.prototype._elementsAll=function(t){return s(t,"array")&&(t=t.join(",")||null),this.dialog.querySelectorAll(t)},n.prototype.focus=function(t){t=t||this.elements(this.options.focusElements)[0]||this.dialog.firstChild,t&&s(t.focus,"function")&&t.focus()},n.prototype.keydown=function(t){function o(){t.preventDefault(),t.stopPropagation()}if(this.options.escapeClose&&27==t.which&&this.close(),this.opened&&9==t.which&&this.dialog.contains(t.target)){var s=this.elements(this.options.focusElements),i=s[0],e=s[s.length-1];i==e?o():t.target==i&&t.shiftKey?(o(),e.focus()):t.target!=e||t.shiftKey||(o(),i.focus())}},"object"==typeof module&&"object"==typeof module.exports?module.exports=n:t.RModal=n}(window,document);