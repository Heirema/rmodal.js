!function(t,o){"use strict";function i(t,o){return Object.prototype.toString.call(t).toLowerCase()==="[object "+o+"]"}function s(t,o){var i=t.className.split(/\s+/);i[0]||(i=[]),i.indexOf(o)>-1||(i.push(o),t.className=i.join(" "))}function e(t,o){var i=t.className.split(/\s+/),s=i.indexOf(o);s>-1&&i.splice(s,1),t.className=i.join(" ")}function n(t,o){this.opened=!1,this.options=o||{},this.options.bodyClass=this.options.bodyClass||"modal-open",this.options.dialogClass=this.options.dialogClass||"modal-dialog",this.options.dialogOpenClass=this.options.dialogOpenClass||"bounceInDown",this.options.dialogCloseClass=this.options.dialogCloseClass||"bounceOutUp",void 0===this.options.escapeClose&&(this.options.escapeClose=!0),this.options.focusElements=this.options.elements||["a[href]","area[href]","input:not([disabled]):not([type=hidden])","button:not([disabled])","select:not([disabled])","textarea:not([disabled])","iframe","object","embed","*[tabindex]","*[contenteditable]"],void 0===this.options.focus&&(this.options.focus=!0),this.focusOutElement=null,this.overlay=t,this.dialog=t.querySelector("."+this.options.dialogClass),void 0!==this.options.content&&this.content(this.options.content)}n.prototype.open=function(t){var o=this;return this.content(t),i(this.options.beforeOpen,"function")?this.options.beforeOpen(function(){o._doOpen()}):void this._doOpen()},n.prototype._doOpen=function(){s(o.body,this.options.bodyClass),e(this.dialog,this.options.dialogCloseClass),s(this.dialog,this.options.dialogOpenClass),this.overlay.style.display="block",this.resize(),this.options.focus&&(this.focusOutElement=o.activeElement,this.focus()),i(this.options.afterOpen,"function")&&this.options.afterOpen(),this.opened=!0},n.prototype.close=function(){var t=this;return i(this.options.beforeClose,"function")?this.options.beforeClose(function(){t._doClose()}):void this._doClose()},n.prototype._doClose=function(){var t=this;e(this.dialog,this.options.dialogOpenClass),s(this.dialog,this.options.dialogCloseClass),e(o.body,this.options.bodyClass),this.options.focus&&this.focus(this.focusOutElement),i(this.options.afterClose,"function")&&this.options.afterClose(),this.opened=!1,setTimeout(function(){t.overlay.style.display="none"},500)},n.prototype.content=function(t){return void 0===t?this.dialog.innerHTML:void(this.dialog.innerHTML=t)},n.prototype.resize=function(){var i=t.innerWidth,s=t.innerHeight;o.body.clientHeight>t.innerHeight&&(i=o.body.clientWidth,s=o.body.clientHeight),this.overlay.style.width=i+"px",this.overlay.style.height=s+"px"},n.prototype.elements=function(o,i){return i=i||t.navigator.appVersion.indexOf("MSIE 9.0")>-1,[].filter.call(this._elementsAll(o),function(o){if(i){var s=t.getComputedStyle(o);return"none"!==s.display&&"hidden"!==s.visibility}return null!==o.offsetParent})},n.prototype._elementsAll=function(t){return i(t,"array")&&(t=t.join(",")||null),this.dialog.querySelectorAll(t)},n.prototype.focus=function(t){t=t||this.elements(this.options.focusElements)[0]||this.dialog.firstChild,t&&i(t.focus,"function")&&t.focus()},n.prototype.keydown=function(t){function o(){t.preventDefault(),t.stopPropagation()}if(this.options.escapeClose&&27==t.which&&this.close(),this.opened&&9==t.which&&this.dialog.contains(t.target)){var i=this.elements(this.options.focusElements),s=i[0],e=i[i.length-1];s==e?o():t.target==s&&t.shiftKey?(o(),e.focus()):t.target!=e||t.shiftKey||(o(),s.focus())}},t.RModal=n}(this,this.document);